## Search layers
source src_geojb_locations : def_pgsql
{
    sql_db = cwdev_geojb
    sql_attr_bigint = commune_gid
    sql_attr_string = origin
    sql_attr_string = label
    sql_attr_string = geom_st_box2d
    sql_attr_float = x
    sql_attr_float = y
    sql_attr_float = lat
    sql_attr_float = lon
    sql_field_string = ofs
    sql_field_string = ofs_arr
    sql_field_string = detail
    sql_query = \
        SELECT \
            commune_gid::bigint \
            , '<b>'||commune_nom||'</b>' as label \
            , commune_nom as detail \
            , 'communes' as origin \
            , cast(commune_ofs as text) as ofs \
            , cast(commune_ofs_arr as text) as ofs_arr \
	    , box2d(the_geom) as geom_st_box2d \
    	    , commune_gid \
        from \
            communes
}

index geojb_locations
{
    type = plain
    docinfo = extern
    min_infix_len = 2
    source = src_geojb_locations
    path = /var/lib/sphinx/data/index/geojb_locations
}
